<h1>Playlists</h1>

<table><tr><td valign="top">
<%= link_to 'New playlist', new_playlist_path %>
</td><td valign="top">&nbsp; or &nbsp;</td><td>
<% form_tag playlists_path, :method => 'get' do %>
  Search in playlists:
  <%= text_field_tag :q, params[:q], :id => :search_box, :type => :search %>
  <span style='font-size:10px;margin-left:10px'>
	<%= link_to 'Query Syntax Help', "/query.html", :target => '_blank' %>
	</span>					
<% end %>
</td></tr></table>

<% if @summary %>
	<table border="0" cellspacing="0" cellpadding="4">
	<caption><b>Execution Summary</b></caption>
	<tr>
		<% total = 0
		@summary.collect {|t| total += t.total.to_i}%>
		<% @summary.each do |summary| %>
				<th><%= TestCaseExecution::RESULTS[summary.result] %></th>
		<% end %>
		<th>Bugs</th>
	</tr>
	<tr>
	<% @summary.each do |summary| %>
			<td align="center" valign="top"><b><%= summary.total%></b> <br/><%= (summary.total.to_i * 1.0 / total * 100 ).round 1%>%</td>
	<% end %>
			<td align="center" valign="top"><b><%= @bugs.collect{ |e| e.bug_id.split ',' }.flatten.size %></b></td>
	</tr>
</table>
	<%= link_to render(:partial => 'table_report', :locals => {:total => total, :mini_chart => (params[:show_report].nil?)}), :q => params[:q], :show_report => (params[:show_report].nil?) %>
	<% if params[:show_report]%>
	<div>
			<b>Bugs:</b><br><%= @bugs.collect{ |e| "#{e.bug_url} " } %>
	</div>
	<% end %>
	
<% end %>


<table cellspacing="0" class="padded">
  <tr>
    <th>Title</th>
    <th>Description</th>
    <th>User</th>
    <th>Milestone</th>
		<th></th>
		<th></th>
  </tr>

<% for playlist in @my_playlists %>
	<tr style="background-color:<%= cycle("#fff", "#EBF3FE", :name => "colors") -%>">
    <td><%=link_to playlist.title, playlist %></td>
    <td><%=truncate (h playlist.description), 75 %></td>
    <td><%=h playlist.user.login %></td>
    <td><%=h playlist.milestone.name if playlist.milestone %></td>
    <td><%= link_to 'Clone', new_playlist_path(:id => playlist.id) %></td>
    <td><%= link_to 'Delete', playlist, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
<% unless @my_playlists.empty?%>
<!-- <tr>
	<td colspan=5>
		<h1>Other playlists</h1>
	</td>
</tr>
-->
<% end %>
<% for playlist in @playlists %>
	<tr style="background-color:<%= cycle("#fff", "#EBF3FE", :name => "colors") -%>">
    <td><%=link_to playlist.title, playlist %></td>
    <td><%=truncate (h playlist.description), 75 %></td>
    <td><%=h playlist.user.login %></td>
    <td><%=h playlist.milestone.name if playlist.milestone %></td>
    <td><%= link_to 'Clone', new_playlist_path(:id => playlist.id) %></td>
  </tr>
<% end %>
</table>


