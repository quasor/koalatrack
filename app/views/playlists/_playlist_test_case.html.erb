<tr id="playlist_test_case_<%=playlist_test_case.id%>" style="background-color:<%= cycle("#fff", "#E6E6E6", :name => "colors") %>">
	<td>
		<%#= link_to( "down", down_playlist_test_case_path(playlist_test_case), :method => :put) unless playlist_test_case.last? %>
		<%#= link_to( "up", up_playlist_test_case_path(playlist_test_case), :method => :put) unless playlist_test_case.first?%>
		<%= check_box_tag 'pickme', playlist_test_case.id, false, :onClick => 'pick(this)', :class => 'cbTestCase'%>
	</td>
	<td>
		<%= text_field_tag :playlist_test_case, playlist_test_case.position, :size => 4, :tabindex=>2, :onChange => "sequence(#{playlist_test_case.id},this.value)" %>
	</td>
  <td>
		<%=h playlist_test_case.test_case.category.name if playlist_test_case.test_case.category %>
	</td>
  <td>
		<%=link_to playlist_test_case.test_case.title, playlist_test_case.test_case %>
	</td>
  <td><%=h playlist_test_case.user.login if playlist_test_case.user_id %></td>
	<td>
		<% form_for(TestCaseExecution.new(:playlist_test_case_id => playlist_test_case.id, :test_case_id => playlist_test_case.test_case.id) ) do |f| %><%= f.select :result, [['Execute...',''], ['Pass',1], ['Fail',2], ['Blocked',3],['Not Implemented',4]], {}, {:onChange => "this.value ? $('playlist_test_case_oid_#{playlist_test_case.object_id}').show() : $('playlist_test_case_oid_#{playlist_test_case.object_id}').hide();"} %>
		  <div id="playlist_test_case_oid_<%=playlist_test_case.object_id%>" style="display:none">
		    <b>Bug</b><br />
		    <%= f.text_field :bug_id %>
		  </p>

		  <p>
		    <b>Comment</b><br />
		    <%= f.text_area :comment, :rows => 4 %>
		  </p>

		  <p>
		    <%= f.submit "Save" %>
		  </p>
		    <%= f.hidden_field(:playlist_test_case_id) %>
		    <%= f.hidden_field(:test_case_id) %>
		    <%= f.hidden_field :test_case_version %>
		  </div>
		<% end %>
	</td>
	<td id="playlist_test_case_<%=playlist_test_case.id%>_results">
	<%= playlist_test_case.test_case_executions.last.to_html unless playlist_test_case.test_case_executions.empty? || playlist_test_case.test_case_executions.last.nil? %>
	<% if playlist_test_case.test_case_executions.empty? %>
		Not Run
	<% else %>
	<%= link_to_function 'History', "$('playlist').getElementsByClassName('playlist_test_case_#{playlist_test_case.id}').invoke('toggle');"%>
	<% end %>
	<%#= debug playlist_test_case.test_case_executions%>
	</td>
	<td>
		<% unless playlist_test_case.test_case_executions.empty?%>
			<%= playlist_test_case.test_case_executions.collect{ |e| "#{e.bug_url} " } %>
		<% end %>
	</td>
	<td nowrap><%=h playlist_test_case.test_case_executions.last.created_at if !playlist_test_case.test_case_executions.empty? %></td>
  <td><%=h playlist_test_case.test_case.priority_in_feature %></td>
  <td><%=h playlist_test_case.test_case.priority_in_product %></td>
	<td style="font-size:10px;line-height:9px;"><%= playlist_test_case.test_case.tag %></td>
  <td><%= link_to 'X', playlist_test_case, :confirm => 'Removing test case from playlist. Are you sure?', :method => :delete %></td>
</tr>
	<%= render :partial => 'playlist_test_cases/results', :collection => playlist_test_case.test_case_executions, :locals => {:class_name => "playlist_test_case_#{playlist_test_case.id}"} %>
